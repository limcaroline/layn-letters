{% extends "base.html" %}
{% block title %}Reviews — Layn Letters{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3">Reviews</h1>
  {% if user.is_authenticated %}
    {% if user.is_staff or user.username == SITE_OWNER_USERNAME %}
      <a class="btn btn-primary" href="{% url 'reviews:create' %}">
        New Review
      </a>
      <a class="btn btn-outline-secondary"
         href="{% url 'reviews:place_create' %}">
        New Place
      </a>
    {% endif %}
  {% endif %}
</div>

<form class="input-group mb-3" method="get">
  <input name="place" class="form-control" placeholder="Filter by place">
  <button class="btn btn-outline-secondary">Search</button>
</form>

<ul class="list-group">
  {% for r in object_list %}
  <li class="list-group-item">
    <a href="{{ r.get_absolute_url }}"><strong>{{ r.title }}</strong></a>
    — {{ r.place.name }}
    <span class="ms-2 badge text-bg-primary">★ {{ r.rating }}</span>
    <span class="text-muted small ms-2">
      by {{ r.author }} · {{ r.created|date:"M j, Y" }}
    </span>
  </li>
  {% empty %}
  <li class="list-group-item text-muted">No reviews yet.</li>
  {% endfor %}
</ul>
{% endblock %}
